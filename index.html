<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyprus Tax Calculator</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
            background-color: #f8f9fa;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .calculator-wrapper { background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .salary-input { padding: 2em 1.5em 1.5em; background: linear-gradient(135deg, #3dbaff 0%, #2196F3 100%); color: white; }
        .input-row { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 1.5em; flex-wrap: wrap; }
        .salary-type-container { text-align: center; }
        .salary-type-container select { padding: 0.4em 0.8em; border: none; border-radius: 4px; background-color: rgba(255,255,255,0.2); color: white; font-size: 1em; cursor: pointer; }
        .salary-type-container select option { color: #333; }
        .salary-input-container input { font-size: 1.4em; padding: 0.5em 0.8em; border: none; border-radius: 4px; width: 200px; text-align: center; }
        .salary-input-container input:focus { outline: none; box-shadow: 0 0 0 3px rgba(255,255,255,0.3); }
        .toggles-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .toggle-container { display: flex; align-items: center; justify-content: center; gap: 10px; }
        .react-toggle { touch-action: pan-x; display: inline-block; position: relative; cursor: pointer; background-color: transparent; border: 0; padding: 0; user-select: none; }
        .react-toggle-track { width: 50px; height: 24px; padding: 0; border-radius: 30px; background-color: rgba(255,255,255,0.3); transition: all 0.2s ease; }
        .react-toggle:hover:not(.react-toggle--disabled) .react-toggle-track { background-color: rgba(255,255,255,0.4); }
        .react-toggle--checked .react-toggle-track { background-color: #4CAF50; }
        .react-toggle--checked:hover:not(.react-toggle--disabled) .react-toggle-track { background-color: #45a049; }
        .react-toggle-thumb { position: absolute; top: 1px; left: 1px; width: 22px; height: 22px; border: 1px solid rgba(255,255,255,0.3); border-radius: 50%; background-color: #fafafa; transition: all 0.25s ease; }
        .react-toggle--checked .react-toggle-thumb { left: 27px; border-color: #4CAF50; }
        .react-toggle-screenreader-only { border: 0; clip: rect(0 0 0 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; }
        .tax-deductions-section { padding: 2em 1.5em; background-color: #f8f9fa; border-top: 1px solid #dee2e6; }
        .deductions-title { font-size: 1.4rem; margin: 0 0 1em 0; color: #333; }
        .deductions-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 1em; }
        .deduction-item { display: flex; flex-direction: column; gap: 8px; }
        .deduction-item label { font-weight: 500; color: #666; font-size: 0.95em; }
        .deduction-item input[type="number"] { padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 1em; }
        .deduction-item input[type="number"]:focus { border-color: #3dbaff; outline: none; box-shadow: 0 0 0 3px rgba(61, 186, 255, 0.1); }
        .checkbox-label { display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 10px; background-color: white; border: 1px solid #ddd; border-radius: 4px; transition: all 0.2s; }
        .checkbox-label:hover { border-color: #3dbaff; }
        .checkbox-label input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
        .checkbox-label span { font-weight: 500; color: #666; }
        .deduction-info { margin-top: 1em; padding: 15px; background-color: #e3f2fd; border-left: 4px solid #2196F3; border-radius: 4px; font-size: 0.95em; color: #1976d2; }
        .deduction-info.error { background-color: #ffebee; border-left-color: #f44336; color: #c62828; }
        .results-container { padding: 2em 1.5em; }
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .results-column h2 { font-size: 1.5rem; margin: 0 0 1em 0; color: #333; border-bottom: 2px solid #3dbaff; padding-bottom: 0.5em; }
        .result-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .result-item:last-child { border-bottom: 2px solid #3dbaff; font-weight: bold; font-size: 1.1em; }
        .result-label { color: #666; font-weight: 500; text-transform: capitalize; }
        .result-value { font-size: 1.2em; font-weight: 600; color: #333; }
        .result-item:last-child .result-value { color: #2196F3; }
        .tax-breakdown { padding: 1.5em; background-color: #f8f9fa; border-top: 1px solid #dee2e6; }
        .tax-breakdown h2 { font-size: 1.4rem; margin: 0 0 1em 0; color: #333; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .caret { display: inline-block; width: 0; height: 0; border-top: 6px solid #666; border-right: 6px solid transparent; border-left: 6px solid transparent; transition: transform 0.3s; }
        .caret.open { transform: rotate(180deg); }
        .tax-table { width: 100%; border-collapse: collapse; background: white; border-radius: 4px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .tax-table th, .tax-table td { padding: 12px; text-align: center; border-bottom: 1px solid #dee2e6; }
        .tax-table th { background-color: #3dbaff; color: white; font-weight: 600; }
        .tax-table tbody tr:hover { background-color: #f8f9fa; }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .results-grid, .deductions-grid { grid-template-columns: 1fr; }
            .input-row { flex-direction: column; gap: 15px; }
            .salary-input-container input { width: 160px; }
            .salary-input { padding: 1.5em 1em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calculator-wrapper">
            <div class="salary-input">
                <div class="input-row">
                    <div class="salary-type-container">
                        <select id="salaryType"><option value="annual">Annual</option><option value="monthly">Monthly</option></select>
                        <div style="margin-top: 5px; font-size: 0.9em;">Salary Period</div>
                    </div>
                    <div class="salary-input-container">
                        <input type="number" id="salaryInput" placeholder="30000" min="0" step="100">
                    </div>
                </div>
                <div class="toggles-container">
                    <div class="toggle-container">
                        <label class="react-toggle" id="thirteenthToggle" role="switch" aria-checked="false">
                            <div class="react-toggle-track"></div><div class="react-toggle-thumb"></div>
                            <input class="react-toggle-screenreader-only" type="checkbox" id="thirteenthCheckbox">
                        </label>
                        <span>13th Month Salary</span>
                    </div>
                    <div class="toggle-container">
                        <label class="react-toggle" id="ataToggle" role="switch" aria-checked="false">
                            <div class="react-toggle-track"></div><div class="react-toggle-thumb"></div>
                            <input class="react-toggle-screenreader-only" type="checkbox" id="ataCheckbox">
                        </label>
                        <span>Include ATA</span>
                    </div>
                </div>
            </div>

            <div id="deductions-container" class="tax-breakdown">
                <h2 id="deductionsToggle">Deductions<span class="caret"></span></h2>
                <div id="deductionsContent" style="display: none;">                
                    <div class="tax-deductions-section">
                        <h3 class="deductions-title">Donation Deductions</h3>
                        <div class="deductions-grid">
                            <div class="deduction-item">
                                <label for="donations">Donations (€)</label>
                                <input type="number" id="donations" placeholder="0" min="0" step="100">
                            </div>
                        </div>
                    </div>            
                    <div class="tax-deductions-section">
                        <h3 class="deductions-title">Family Deductions</h3>
                        <div class="deductions-grid">
                            <div class="deduction-item">
                                <label for="householdIncome">Household Income (€)</label>
                                <input type="number" id="householdIncome" placeholder="0" min="0" step="100">
                            </div>                   
                            <div class="deduction-item">
                                <label for="checkbox-label">&nbsp;</label>
                                <label class="checkbox-label"><input type="checkbox" id="hasSpouse"><span>Has Spouse</span></label>
                            </div>
                            <div class="deduction-item">
                                <label for="numChildren">Number of Children under 25</label>
                                <input type="number" id="numChildren" placeholder="0" min="0" max="20" step="1">
                            </div>
                            <div class="deduction-item">
                                <label for="loanInterest">Loan Interest Paid (€)</label>
                                <input type="number" id="loanInterest" placeholder="0" min="0" step="100">
                            </div>
                        </div>
                        <div id="deductionInfo" class="deduction-info"></div>
                    </div>
                    <div class="tax-deductions-section">
                        <h3 class="deductions-title">Life Insurance Deductions</h3>
                        <div class="deductions-grid">
                            <div class="deduction-item">
                                <label for="lifeInsurancePremium">Life Insurance Premium (€)</label>
                                <input type="number" id="lifeInsurancePremium" placeholder="0" min="0" step="100">
                            </div>
                            <div class="deduction-item">
                                <label for="lifeInsuranceAmount">Life Insurance Amount (€)</label>
                                <input type="number" id="lifeInsuranceAmount" placeholder="0" min="0" step="100">
                            </div>
                        </div>
                    </div>
                    <div class="tax-deductions-section">
                        <h3 class="deductions-title">Private Medical Fund Deductions</h3>
                        <div class="deductions-grid">
                            <div class="deduction-item">
                                <label for="privateMedicalFundContributions">Private Medical Fund Contributions (€)</label>
                                <input type="number" id="privateMedicalFundContributions" placeholder="0" min="0" step="100">
                            </div>
                        </div>
                    </div>
                    <div class="tax-deductions-section">
                        <h3 class="deductions-title">Pension & Provident Fund Deductions</h3>
                        <div class="deductions-grid">
                            <div class="deduction-item">
                                <label for="providentFund">Provident Fund Contributions (€)</label>
                                <input type="number" id="providentFund" placeholder="0" min="0" step="100">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="results-container">
                <div class="results-grid">
                    <div class="results-column">
                        <h2>Annual</h2>
                        <div class="result-item"><span class="result-label">Gross Salary</span><span class="result-value" id="annualGross">€0.00</span></div>
                        <div class="result-item" id="annualAtaRow" style="display: none;"><span class="result-label">ATA</span><span class="result-value" id="annualAta">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Income Tax</span><span class="result-value" id="annualTax">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Social Insurance</span><span class="result-value" id="annualSocial">€0.00</span></div>
                        <div class="result-item"><span class="result-label">NHIS (GESY)</span><span class="result-value" id="annualGesy">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Net Salary</span><span class="result-value" id="annualNet">€0.00</span></div>
                    </div>
                    <div class="results-column">
                        <h2>Monthly</h2>
                        <div class="result-item"><span class="result-label">Gross Salary</span><span class="result-value" id="monthlyGross">€0.00</span></div>
                        <div class="result-item" id="monthlyAtaRow" style="display: none;"><span class="result-label">ATA</span><span class="result-value" id="monthlyAta">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Income Tax</span><span class="result-value" id="monthlyTax">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Social Insurance</span><span class="result-value" id="monthlySocial">€0.00</span></div>
                        <div class="result-item"><span class="result-label">NHIS (GESY)</span><span class="result-value" id="monthlyGesy">€0.00</span></div>
                        <div class="result-item"><span class="result-label">Net Salary</span><span class="result-value" id="monthlyNet">€0.00</span></div>
                    </div>
                </div>
            </div>
            <div class="tax-breakdown">
                <h2 id="taxBreakdownToggle">Tax Breakdown<span class="caret open"></span></h2>
                <div id="taxBreakdownContent">
                    <table class="tax-table">
                        <thead><tr><th>Income Range Start</th><th>Income Range End</th><th>Tax Rate</th><th>Tax Amount</th></tr></thead>
                        <tbody id="taxBreakdownTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script>
        const $ = id => document.getElementById(id);
        
        const TAX_BRACKETS = [
            { from: 0,     to: 22000,    rate: 0 },
            { from: 22001, to: 32000,    rate: 20 },
            { from: 32001, to: 42000,    rate: 25 },
            { from: 42001, to: 72000,    rate: 30 },
            { from: 72001, to: Infinity, rate: 35 }
        ];

        const GESY_RATE = 2.65,
              GESY_YEARLY_CAP = 180000,
              SOCIAL_INSURANCE_RATE = 8.9,
              SOCIAL_INSURANCE_MONTHLY_CAP = 5551,
              ATA_RATE = 1.25,
              LIFE_INSURANCE_CAP_PERCENT = 7,
              PRIVATE_MEDICAL_FUND_PERCENT = 2,
              PROVIDENT_FUND_PERCENT = 10;

        class TaxCalculator {
            constructor() {
                this.salaryAmount = 30000;
                this.isAnnual = true;
                this.hasThirteenthMonth = false;
                this.hasAta = false;
                this.householdIncome = 0;
                this.loanInterest = 0;
                this.hasSpouse = false;
                this.numChildren = 0;
                this.donations = 0;
                this.lifeInsurancePremium = 0;
                this.lifeInsuranceAmount = 0;
                this.privateMedicalFundContributions = 0;
                this.providentFund = 0;
                
                this.initializeEventListeners();
                this.calculate()
            }

            initializeEventListeners() {
                $('salaryInput').addEventListener('input', e => {
                    this.salaryAmount = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('salaryType').addEventListener('change', e => {
                    this.isAnnual = e.target.value === 'annual';
                    this.calculate()
                });
               
                $('householdIncome').addEventListener('input', e => {
                    this.householdIncome = parseFloat(e.target.value) || 0;
                    this.calculate()
                });
                
                $('loanInterest').addEventListener('input', e => {
                    this.loanInterest = parseFloat(e.target.value) || 0;
                    this.calculate()
                });
                
                $('hasSpouse').addEventListener('change', e => {
                    this.hasSpouse = e.target.checked;
                    this.calculate()
                });
                
                $('numChildren').addEventListener('input', e => {
                    this.numChildren = parseInt(e.target.value) || 0;
                    this.calculate()
                });

                $('donations').addEventListener('input', e => {
                    this.donations = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('lifeInsurancePremium').addEventListener('input', e => {
                    this.lifeInsurancePremium = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('lifeInsuranceAmount').addEventListener('input', e => {
                    this.lifeInsuranceAmount = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('privateMedicalFundContributions').addEventListener('input', e => {
                    this.privateMedicalFundContributions = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('providentFund').addEventListener('input', e => {
                    this.providentFund = parseFloat(e.target.value) || 0;
                    this.calculate()
                });

                $('thirteenthToggle').addEventListener('click', e => {
                    e.preventDefault();
                    this.toggleThirteenthMonth()
                });
                
                $('thirteenthCheckbox').addEventListener('change', () => this.toggleThirteenthMonth());
                
                $('ataToggle').addEventListener('click', e => {
                    e.preventDefault();
                    this.toggleAta()
                });

                $('ataCheckbox').addEventListener('change', () => this.toggleAta());
                
                $('taxBreakdownToggle').addEventListener('click', () => this.toggleCollapsableSection($('taxBreakdownToggle'), $('taxBreakdownContent')));

                $('deductionsToggle').addEventListener('click', () => this.toggleCollapsableSection($('deductionsToggle'), $('deductionsContent')));
            }

            renderToggle(toggleEl, checkboxEl, value) {
                toggleEl.classList.toggle('react-toggle--checked', value);
                toggleEl.setAttribute('aria-checked', value);
                checkboxEl.checked = value;
            }

            toggleThirteenthMonth() {
                this.hasThirteenthMonth = !this.hasThirteenthMonth;
                this.renderToggle($('thirteenthToggle'), $('thirteenthCheckbox'), this.hasThirteenthMonth);
                this.calculate()
            }

            toggleAta() {
                this.hasAta = !this.hasAta;                                
                this.renderToggle($('ataToggle'), $('ataCheckbox'), this.hasAta);                
                this.calculate()
            }

            toggleCollapsableSection(section, content) {
                const caret = section.querySelector('.caret');

                if (content.style.display === 'none') {
                    content.style.display = 'block';
                    caret.classList.add('open')
                } else {
                    content.style.display = 'none';
                    caret.classList.remove('open')
                }
            }

            calculateTax(annualSalary) {
                let totalTax = 0;
                const taxBreakdown = [];
                
                for (const bracket of TAX_BRACKETS) {
                    if (annualSalary <= bracket.from) break;
                    
                    const taxableInBracket = Math.min(annualSalary, bracket.to) - bracket.from + 1;
                    const taxInBracket = (taxableInBracket * bracket.rate) / 100;
                    
                    if (taxInBracket >= 0) {
                        totalTax += taxInBracket;
                        taxBreakdown.push({
                            from: bracket.from,
                            to: bracket.to === Infinity ? annualSalary : bracket.to,
                            rate: bracket.rate,
                            tax: taxInBracket
                        });
                    }
                }
                
                return { totalTax, taxBreakdown };
            }

            calculateSocialInsurance(annualSalary) {
                const monthlySalary = annualSalary / 12;
                const cappedMonthlySalary = Math.min(monthlySalary, SOCIAL_INSURANCE_MONTHLY_CAP);
                return (cappedMonthlySalary * SOCIAL_INSURANCE_RATE * 12) / 100;
            }

            calculateGesy(annualSalary) {
                const cappedSalary = Math.min(annualSalary, GESY_YEARLY_CAP);
                return (cappedSalary * GESY_RATE) / 100;
            }

            calculateAta(annualSalary) {
                return (annualSalary * ATA_RATE) / 100;
            }

            isEligibleForDeductions() {
                const income = this.householdIncome || 0;

                return (!this.hasSpouse && this.numChildren === 0      && income <=  40000)
                    || ( this.hasSpouse                                && income <=  90000)
                    || (this.numChildren >= 1 && this.numChildren <= 2 && income <= 100000)
                    || (this.numChildren >= 3 && this.numChildren <= 4 && income <= 150000)
                    || (this.numChildren >= 5                          && income <= 200000);                
            }

            calculateFamilyTaxDeductions() {
                if (!this.isEligibleForDeductions()) return {
                    total: 0,
                    loanInterest: 0,
                    children: 0,
                    eligible: false
                };
                const loanInterestDeductions = Math.min(this.loanInterest, 2000);
                
                let childDeductions = 0;                
                if (this.numChildren >= 1) childDeductions += 1000;
                if (this.numChildren >= 2) childDeductions += 1250;
                if (this.numChildren >= 3) childDeductions += (this.numChildren - 2) * 1500;

                return {
                    total: loanInterestDeductions + childDeductions,
                    loanInterest: loanInterestDeductions,
                    children: childDeductions,
                    eligible: true
                }
            }

            calculate() {
				let months = this.hasThirteenthMonth ? 13 : 12;
                // Convert to annual salary
                let annualSalary = this.isAnnual ? this.salaryAmount : this.salaryAmount * months;
				const ataAmount = this.hasAta ? this.calculateAta(annualSalary) : 0;
				
				let effectiveAnnualSalary = annualSalary + ataAmount;

                const familyDeductions = this.calculateFamilyTaxDeductions();
                const lifeInsuranceDeductions = Math.min(this.lifeInsurancePremium, this.lifeInsuranceAmount * LIFE_INSURANCE_CAP_PERCENT / 100);
                const privateMedicalFundDeductions =  Math.min(this.privateMedicalFundContributions, effectiveAnnualSalary * PRIVATE_MEDICAL_FUND_PERCENT / 100);
                const providentFundDeductions =  Math.min(this.providentFund, effectiveAnnualSalary * PROVIDENT_FUND_PERCENT / 100);
                const socialInsuranceAmount = this.calculateSocialInsurance(effectiveAnnualSalary);
                const gesyAmount = this.calculateGesy(effectiveAnnualSalary);

                const netTotalIncome = Math.max(0, effectiveAnnualSalary - this.donations - familyDeductions.total);
                const contributionsDeductions = Math.min(socialInsuranceAmount + gesyAmount + lifeInsuranceDeductions + privateMedicalFundDeductions + providentFundDeductions, netTotalIncome / 5);
                
                const taxableIncome = netTotalIncome - contributionsDeductions;

                // Calculate deductions
                const taxResult = this.calculateTax(taxableIncome);
                
                // Calculate net                
                const annualNet = effectiveAnnualSalary - taxResult.totalTax - socialInsuranceAmount - gesyAmount;
                
                // Update display
                this.updateResults(annualSalary, taxResult.totalTax, socialInsuranceAmount, gesyAmount, ataAmount, annualNet, months);
                this.updateTaxBreakdown(taxResult.taxBreakdown);
                this.updateFamilyDeductionInfo(familyDeductions)
            }

            updateResults(annualGross, annualTax, annualSocial, annualGesy, annualAta, annualNet, months) {                
                $('annualGross').textContent = this.formatCurrency(annualGross);
                $('annualTax').textContent = this.formatCurrency(annualTax);
                $('annualSocial').textContent = this.formatCurrency(annualSocial);
                $('annualGesy').textContent = this.formatCurrency(annualGesy);
                $('annualNet').textContent = this.formatCurrency(annualNet);
                
                const annualAtaRow = $('annualAtaRow'),
                      monthlyAtaRow =$('monthlyAtaRow');
                
                if (this.hasAta) {
                    $('annualAta').textContent = this.formatCurrency(annualAta);
                    $('monthlyAta').textContent = this.formatCurrency(annualAta / months);
                    annualAtaRow.style.display = 'flex';
                    monthlyAtaRow.style.display = 'flex'
                } else {
                    annualAtaRow.style.display = 'none';
                    monthlyAtaRow.style.display = 'none'
                }
                
                $('monthlyGross').textContent = this.formatCurrency(annualGross / months);
                $('monthlyTax').textContent = this.formatCurrency(annualTax / months);
                $('monthlySocial').textContent = this.formatCurrency(annualSocial / months);
                $('monthlyGesy').textContent = this.formatCurrency(annualGesy / months);
                $('monthlyNet').textContent = this.formatCurrency(annualNet / months)
            }
            
            updateTaxBreakdown(taxBreakdown) {
                const tableBody = $('taxBreakdownTable');                            

                tableBody.innerHTML = '';
                if (taxBreakdown.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td>€0</td><td>€22,000</td><td>0%</td><td>€0.00</td>';
                    tableBody.appendChild(row);
                    return
                }

                const tableRows = document.createDocumentFragment();
                for (const level of taxBreakdown) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>€${level.from.toLocaleString()}</td><td>${level.to===Infinity?'€∞':'€'+level.to.toLocaleString()}</td><td>${level.rate}%</td><td>${this.formatCurrency(level.tax)}</td>`;
                    tableRows.appendChild(row);
                }
                tableBody.appendChild(tableRows)
            }

            formatCurrency(a) {
                return '€' + a.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')
            }

            updateFamilyDeductionInfo(d) {
                const i = $('deductionInfo');
                if (!this.householdIncome && !this.loanInterest && !this.hasSpouse && this.numChildren === 0) {
                    i.innerHTML = '';
                    return
                }
                if (!d.eligible) {
                    i.className = 'deduction-info error';
                    i.innerHTML = '<strong>Not Eligible:</strong> Your household income exceeds the eligibility threshold for the selected family situation.';
                    return
                }
                if (d.total === 0) {
                    i.className = 'deduction-info';
                    i.innerHTML = '<strong>Eligible for deductions:</strong> Enter loan interest paid and/or number of children to calculate deductions.';
                    return
                }
                let m = `<strong>Tax Deductions Applied:</strong> ${this.formatCurrency(d.total)} excluded from taxable income.<br>`;
                if (d.loanInterest > 0) m += `• Loan Interest: ${this.formatCurrency(d.loanInterest)}<br>`;
                if (d.children > 0) m += `• Children Deduction (${this.numChildren} child${this.numChildren>1?'ren':''}): ${this.formatCurrency(d.children)}`;
                i.className = 'deduction-info';
                i.innerHTML = m
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new TaxCalculator()
        });
    </script>
</body>
</html>
